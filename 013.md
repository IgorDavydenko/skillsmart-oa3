## 13. Как выполнять анализ
 
В анализе, изучении, "моделировании реального мира" надо прежде всего понять, а что такое "реальный мир", что же мы анализируем и моделируем? Всегда это будет только чьё-то, в лучшем случае экспертное, описание мира, но по определению всегда ограниченное и неполное. Поэтому если само анализируемое описание "реального мира" плохое и запутанное, продуктивно работающую программную систему мы создать не сможем.

Все рекомендации для выделения классов (или модулей) предполагают, что у нас имеется техническое задание, как-то более-менее удовлетворительно описывающее моделируемую предметную область, и мы будем этого придерживаться. Откуда взялось само ТЗ, каково его качество, насколько оно непротиворечиво -- тема, к данным курсам прямого отношения не имеющая. Далее исходим из того, что оно соответствует хотя бы здравому смыслу.

Первый принцип анализа: выявляем, идентифицируем подходящие абстракции (но пока не классы программы) в строгих рамках моделируемой области, заданной некоей внешней спецификацией (например, техническим заданием или словесными объяснениями заказчика).

Эти границы мы определили на первом шаге.

Но как же правильно начинать работу над проектом в самом начале, как выявлять абстракции, АТД? Это конечно процесс неформальный, творческий, он зависит от способностей, опыта и даже от удачи. Такая же ситуация и в математике, где не существует готовых рецептов разработки новых теорий и доказательств.

Тут можно лишь привести хорошие идеи и познакомиться с потенциальными опасностями.

Нередко тут применяется уже упоминавшийся функциональный подход, достаточно интуитивный и понятный практически любому. И как это часто бывает в сложных инженерных областях, такие наивные "очевидные", с ходу напрашивающиеся подходы показывают весьма и весьма низкий коэффициент полезного действия. Более того, подобный наивный подход с применением ООП тоже непродуктивен, о чём ранее уже говорилось. Давайте ещё раз разберём, почему, только более детально.

Функциональный подход предлагает делать акцент при анализе ТЗ на глаголах (действиях), а в объектно-ориентированном подходе акцент условно делается на существительных (описаниях объектов).

Например, в ТЗ имеется такой сценарий-пример (среди сотен и тысяч подобных): "гном прячет меч в ножны, поднимает с земли палицу и берёт её в руки в качестве оружия". Функциональный подход подразумевает, что надо специфицировать три функции "Убрать(существо, оружие, инвентарь)", "Взять-в-руки-с-клетки(существо, предмет, клетка-карты)" и "Сделать-оружием(существо, оружие-в-руках)". Объектный подход предлагает выделить классы Гном (точнее, иерархию Существо - Гном и потомки для других рас), Инвентарь, Карта (включающая в себя например массив из объектов класса Клетка), иерархию Оружие с потомками Меч, Палица и др., и добавить им соответствующие методы. В данном случае мы переходим от синтаксиса "Убрать(существо, оружие, инвентарь)" к более наглядному и безопасному "существо.Убрать-в-инвентарь-оружие-в-руках()".

Однако на практике такой прямой и поверхностный анализ ТЗ чаще просто создаёт больше путаницы независимо от того, применяется ли функциональный или объектный подходы. Само техзадание обычно написано нечётко, составляют его представители заказчика, в проектировании не разбирающиеся, поэтому подобные тексты изобилуют двусмысленностями, неточностями, откровенными ошибками, поэтому проектировать объектную архитектуру таким способом весьма опасно. Например, даже в таком простом случае непонятно, надо ли действительно будет формировать иерархию Оружие с потомками Меч, Палица и другими видами оружия, или же достаточно только одного класса Оружие, если конкретные виды оружия достаточно различать только по их числовым характеристикам?

В результате вместо упрощения создаваемая система только больше усложняется: наследование только запутывает её понимание, а формат "объект . метод" создаёт мнооество зависимостей и проблем, связанных с состояниями объектов.

