## 14. Правильный подход к ООАП

Существительные из ТЗ слишком часто будут провоцировать на выделение классов, которые на самом деле совершенно не будут нужны. Они будут приводить как к появлению лишних кандидатов, так и к пропуску нужных. И хотя успешность тут практически полностью зависит от опыта, интуиции, мастерства аналитика и проектировщика, всё же существует фундаментальный принцип, с которого всегда следует начинать.

Мы выявляем классы с помощью теории АТД, всегда пытаясь понять, будет ли некоторая сущность (гном или меч) независимым типом данных со своим чётко определённым и уникальным набором операций? Или же достаточно воспользоваться уже существующим набором операций класса-предка?

Если у гнома имеются какие-то уникальные возможности (например, пить пиво), недоступные никаким другим расам, то это однозначный признак для выделения АТД "гном" с операцией "пить пиво", наследующего все остальные действия, общие для всех рас. А если например меч отличается от палицы только внешним видом (кодом картинки-изображения) и числовыми характеристиками удара, то достаточно пока обойтись одним классом Оружие.

Вдобавок при этом мы выявили лишь очевидные классы, отражающие "естественные" сущности, однако помимо них наверняка потребуются классы поведения (например, реализующие пресловутые паттерны проектирования), которые задают внутреннюю специфику работы всей системы, её архитектуру, о которых пользователь системы и не подозревает. Возможна и обратная ситуация -- во время работы программы допустимо появление объектов, которые с точки зрения исходной модели имеют разный тип (например, Меч и Палица), однако реализованы одним типом Оружие. В проекте эти моменты определяются исключительно наличием или отсутствием соответствующего АТД.

Правильная методика объектно-ориентированного анализа и проектирования на основе АТД подразумевает, что в системе существуют только такие объекты, для которых формально определено, что с ними можно делать -- в контексте моделируемой предметной области.

Классические, не самые лучшие, объектно-ориентированные подходы к проектированию считают, что имеется готовое полноценные техническое задание, и в процессе его изучения и анализа сразу формируется непосредственная схема решения (реализации) сформулированных задач. В нашей методике наоборот мы не делаем принципиального различия между постановкой проблемы и её решением. Анализ, проектирование и реализацию надо выполнять, учитывая опыт схожих проектов и возможности используемой платформы, фреймворка, прежде всего их стандартных библиотек с типовыми структурами данных. Техническое задание тут отнюдь не самый руководящий документ, и более того, при необходимости в него желательно вносить коррективы, исходя прежде всего из интересов сильной архитектуры проекта (например, пожертвовать какими-то неважными требованиями).
